@model DinamikCvSitesi.Models.Profile

@{
    ViewData["Title"] = "Özgeçmiş";
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="display-4 mb-4">Özgeçmiş</h1>
    </div>
</div>

<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-body text-center">
                @if (!string.IsNullOrEmpty(Model.ImagePath))
                {
                    <img class="img-fluid rounded-circle mb-3" src="@Model.ImagePath" alt="@Model.FullName" style="max-width: 150px;" />
                }
                else
                {
                    <img class="img-fluid rounded-circle mb-3" src="~/images/profile-placeholder.jpg" alt="@Model.FullName" style="max-width: 150px;" />
                }
                <h4>@Model.FullName</h4>
                <p class="text-muted">@Model.Title</p>
                <hr />
                <div class="d-flex justify-content-center">
                    @if (!string.IsNullOrEmpty(Model.LinkedIn))
                    {
                        <a href="@Model.LinkedIn" target="_blank" class="btn btn-sm btn-outline-primary mx-1">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    }
                    @if (!string.IsNullOrEmpty(Model.GitHub))
                    {
                        <a href="@Model.GitHub" target="_blank" class="btn btn-sm btn-outline-dark mx-1">
                            <i class="fab fa-github"></i>
                        </a>
                    }
                    @if (!string.IsNullOrEmpty(Model.Twitter))
                    {
                        <a href="@Model.Twitter" target="_blank" class="btn btn-sm btn-outline-info mx-1">
                            <i class="fab fa-twitter"></i>
                        </a>
                    }
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-code me-2"></i> Yetenekler</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.Skills != null && ViewBag.Skills.Count > 0)
                {
                    var skillGroups = ViewBag.Skills as System.Collections.Generic.List<DinamikCvSitesi.Models.Skill>;
                    
                    foreach (var group in skillGroups.GroupBy(s => s.Category))
                    {
                        <h6 class="mt-3">@(string.IsNullOrEmpty(group.Key) ? "Genel" : group.Key)</h6>
                        foreach (var skill in group)
                        {
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span>@skill.Name</span>
                                    <span>@skill.Level%</span>
                                </div>
                                <div class="progress" style="height: 10px;">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: @skill.Level%;" 
                                         aria-valuenow="@skill.Level" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        }
                    }
                }
                else
                {
                    <p class="text-muted">Henüz yetenek bilgisi girilmemiş.</p>
                }
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i> İş Deneyimi</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.Experiences != null && ViewBag.Experiences.Count > 0)
                {
                    foreach (var experience in ViewBag.Experiences)
                    {
                        <div class="mb-4">
                            <div class="d-flex justify-content-between">
                                <h5>@experience.Position</h5>
                                <span class="badge bg-primary">
                                    @(experience.StartDate?.ToString("MMM yyyy")) - 
                                    @(experience.IsCurrentlyWorking ? "Şu an" : experience.EndDate?.ToString("MMM yyyy"))
                                </span>
                            </div>
                            <h6 class="text-muted">@experience.Company</h6>
                            <p class="text-muted mb-2">@experience.Location</p>
                            <p>@experience.Description</p>
                        </div>
                        if (experience != ViewBag.Experiences[ViewBag.Experiences.Count - 1])
                        {
                            <hr />
                        }
                    }
                }
                else
                {
                    <p class="text-muted">Henüz iş deneyimi bilgisi girilmemiş.</p>
                }
            </div>
        </div>

        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i> Eğitim</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.Educations != null && ViewBag.Educations.Count > 0)
                {
                    foreach (var education in ViewBag.Educations)
                    {
                        <div class="mb-4">
                            <div class="d-flex justify-content-between">
                                <h5>@education.Degree</h5>
                                <span class="badge bg-primary">
                                    @(education.StartDate?.ToString("MMM yyyy")) - 
                                    @(education.IsCurrentlyStudying ? "Şu an" : education.EndDate?.ToString("MMM yyyy"))
                                </span>
                            </div>
                            <h6 class="text-muted">@education.School</h6>
                            <p class="text-muted mb-2">@education.FieldOfStudy</p>
                            <p>@education.Description</p>
                        </div>
                        if (education != ViewBag.Educations[ViewBag.Educations.Count - 1])
                        {
                            <hr />
                        }
                    }
                }
                else
                {
                    <p class="text-muted">Henüz eğitim bilgisi girilmemiş.</p>
                }
            </div>
        </div>

        <div class="card border-0 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-certificate me-2"></i> Sertifikalar</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.Certificates != null && ViewBag.Certificates.Count > 0)
                {
                    <div class="row">
                        @foreach (var certificate in ViewBag.Certificates)
                        {
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6>@certificate.Name</h6>
                                        <p class="text-muted mb-2">@certificate.IssuingOrganization</p>
                                        <p class="small mb-2">
                                            <i class="fas fa-calendar-alt me-1"></i> @certificate.IssueDate?.ToString("MMMM yyyy")
                                            @if (certificate.ExpirationDate.HasValue)
                                            {
                                                <span> - @certificate.ExpirationDate?.ToString("MMMM yyyy")</span>
                                            }
                                        </p>
                                        @if (!string.IsNullOrEmpty(certificate.CredentialURL))
                                        {
                                            <a href="@certificate.CredentialURL" target="_blank" class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-external-link-alt me-1"></i> Doğrula
                                            </a>
                                        }
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <p class="text-muted">Henüz sertifika bilgisi girilmemiş.</p>
                }
            </div>
        </div>
    </div>
</div> 